!function(e){e.fn.mailAutoComplete=function(i){var t={className:"emailist",email:["sina.com","3g.sina.cn","163.com","qq.com","gmail.com","126.com","sina.cn","hotmail.com","sohu.com","yahoo.com","tom.com","sogou.com","vip.sina.com","vip.qq.com","vip.163.com","vip.sohu.com","189.cn","etang.com","eyou.com","56.com","21cn.com","yeah.net","139.com"],zIndex:11},n=e.extend({},t,i||{}),c="number"==typeof window.screenX,a="visibility",s={up:38,down:40,enter:13,esc:27,tab:9},l=function(i){var t="",c=i.value.split("@"),a=[];return e.each(n.email,function(e,i){(2!==c.length||""===c[1]||0===i.indexOf(c[1].toLowerCase()))&&a.push(i)}),e.each(a,function(e,n){t=t+"<li"+(i.indexSelected===e?' class="on"':"")+">"+c[0]+"@"+n+"</li>"}),t},o=function(i,t){var n=e.trim(this.value),c="";""===n||""===(c=l(this))?i.css(a,"hidden"):(t&&(this.indexSelected=-1),i.css(a,"visible").html(c))};return e(this).each(function(){this.indexSelected=-1;var i=this,t=e("<ul></ul>").css({position:"absolute",minWidth:i.offsetWidth-2,visibility:"hidden",zIndex:n.zIndex}).addClass(n.className).bind("click",function(t){var n=t&&t.target;n&&"li"===n.tagName.toLowerCase()&&(e(i).val(n.innerHTML).trigger("input"),e(this).css(a,"hidden"),i.focus())});e(this).before(t),window.XMLHttpRequest||t.width(i.offsetWidth-2),c?e(this).bind("input",function(){o.call(this,t,!0)}):i.attachEvent("onpropertychange",function(e){"value"===e.propertyName&&o.call(i,t,!0)}),e(document).bind({click:function(e){var c=e&&e.target,s="";c==i&&i.value&&(s=l(i,n.email))?t.css(a,"visible").html(s):c!=t.get(0)&&c.parentNode!=t.get(0)&&t.css(a,"hidden")},keydown:function(n){var c=t.find("li");if("visible"===t.css(a)){switch(n.keyCode){case s.up:i.indexSelected--,i.indexSelected<0&&(i.indexSelected=-1+c.length),n.preventDefault&&n.preventDefault();break;case s.down:i.indexSelected++,i.indexSelected>=c.length&&(i.indexSelected=0),n.preventDefault&&n.preventDefault();break;case s.enter:n.preventDefault(),c.get(i.indexSelected)&&e(i).val(c.eq(i.indexSelected).html()),t.css("visibility","hidden");break;case s.tab:case s.esc:t.css("visibility","hidden")}-1!==i.indexSelected&&t.html(l(i))}}})})}}(jQuery);